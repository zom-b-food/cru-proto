!function(v,w){var e="tablesort",i={search:!0,count:!0};function s(t,s){this.element=t,this.options=v.extend({},i,s),this._defaults=i,this._name=e,this.init()}s.prototype={init:function(){var t=v(this.element),s=v('<div class="table-sort-container"></div>');this.setup(t,s),this.search(t,s),this.count(t,s)},setup:function(n,c){var e=v('<div class="scrollbar-chrome"></div>'),d=v('<div class="scrollbar-container"><div class="scrollbar"></div></div>'),l=v('<div class="scrollbar-track"></div>'),h=n.parent();function f(t,s){arr=["webkit","moz","ms"];for(var e=0;e<arr.length;e++)t.css("-"+arr[e]+"-user-select",s);t.css("user-select",s)}function r(t){for(var s=v("<tr></tr>"),e=0;e<t.length;e++){var i=v("<td>"+t[e]+"</td>").css("white-space","nowrap");s.append(i)}return s}function s(t){t.on("click",function(){var t,s=[],e={},i=v(this).index(),o=n.hasClass("table-sort-search")?n.find("tbody tr:gt(0)"):n.find("tbody tr");t=v(this).hasClass("table-sort-order-desc")?"asc":v(this).hasClass("table-sort-order-asc")?"des":"asc",o.each(function(){var t=v(this).find("td:eq("+i+")").text()+"_"+v(this).index();e[t]=[],s.push(t),v(this).find("td").each(function(){e[t].push(v(this).html())})}),s=s.sort(),"asc"===t?(s=s.reverse(),v(this).removeClass("table-sort-order-des")):v(this).removeClass("table-sort-order-asc"),function(t){t.find("th").each(function(){v(this).removeClass("table-sort-order-asc"),v(this).removeClass("table-sort-order-des")})}(n),v(this).addClass("table-sort-order-"+t),function(t){for(var s=v("<div></div>"),e=0;e<t.sortArr.length;e++){var i=r(t.rowArr[t.sortArr[e]]);s.append(i)}t.tr.remove(),t.table.find("tbody").append(s.children())}({table:n,tr:o,sortArr:s,rowArr:e})})}function p(t){return JSON.parse("{"+t.attr("style").replace(/;/g,",").replace(/,$/,"").replace(/(|-)\d+(%|px)|(|-)\d+\.\d+(px|%|)|\w+/g,function(t){return'"'+t+'"'})+"}")}function u(t){var s=l.width(),e=s-d.width(),i=t/e,o=e/s*i*100,r=100*(n.width()/c.width()-1)*i;n.css("left",-1*r+"%"),d.css("left",o+"%")}n.find("th").each(function(){var t=v(this);t.css("white-space","nowrap"),v(this).hasClass("table-sort")&&(function(t){var s=v('<div class="table-sort-field"></div>'),e=v('<div class="table-sort-control"></div>'),i=v('<div class="table-sort-up"></div>'),o=v('<div class="table-sort-down"></div>'),r=v(t).clone().html();s.html(r),i.appendTo(e),o.appendTo(e),e.appendTo(s),t.contents().replaceWith(s).end(),f(t,"none"),f(s,"none")}(t),s(t))}),n.find("td").each(function(){v(this).css("white-space","nowrap")}),function(){n.width();var i,o,r,a,t=h.width();function s(){var t=n.width();h.width()<t?(c.find(".scrollbar-chrome").size()<1?(l.append(d),e.append(l),c.append(e),e.css("position","relative"),n.css("width",t+"px"),l.css("position","relative"),d.css("position","absolute"),d.off("mousedown"),l.on("mousedown",function(t){i=d.offset().left-l.offset().left,o=t.pageX-l.offset().left,e.addClass("scrollbar-active"),v("html").on("mousemove",function(t){var s=d.width(),e=l.width();r=t.pageX-l.offset().left,(a=r-o+i)<0&&(a=0),e<a+s&&(a=e-s),u(a)}),f(c,"none")}),v("html").off("mouseup"),v("html").on("mouseup",function(){v("html").off("mousemove"),e.removeClass("scrollbar-active"),f(c,"")})):e.is(":visible")||e.show(),n.css("position","relative"),function(){var t=n.width(),s=h.width();d.css("width",s/t*100+"%")}(),function(){var t=p(d);if(p(n),100<parseFloat(t.left)+parseFloat(t.width)){var s=parseFloat(t.left)+parseFloat(t.width)-100,e=parseFloat(t.left)-s;u(Math.round(e*l.width()/100))}else{e=parseFloat(parseFloat(t.left)*l.width()/100);isNaN(e)||u(Math.round(e))}}()):(e.hide(),n.css("width","100%").css("position","static"))}c.insertBefore(n).css("width",t+"px").css("overflow","hidden").css("position","relative"),n.appendTo(c),s(),v(w).on("resize",function(){c.css("width");var t=c.parent().width();d.attr("style");c.css("width",t+"px"),s()})}()},search:function(t,s){count=this.count},count:function(t,s){if(!(t=v(t)).hasClass("table-sort-show-search-count"))return!1;var e=t.find("tbody tr:gt(0)").filter(":visible").size(),i=s.find("#table-sort-search-container"),o=i.find(".table-sort-search-count");o.size()<1&&(o=v('<div class="table-sort-search-count"></div>')).appendTo(i),o.html(e)}},v.fn[e]=function(t){return this.each(function(){v.data(this,"plugin_"+e)||v.data(this,"plugin_"+e,new s(this,t))})}}(jQuery,window,document);